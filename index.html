<!DOCTYPE html>
<html>
<head>
    <title>pretty data</title>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"></script>
</head>

<body>
<p id = "textstore" style="display:none"></p>

<h1>pretty data</h1>
<input type="file" onchange="readFile(event)">
<br>
<br>
<div>
    <table id = "table">
    </table>
</div>

<script>
var finaltable = ""

function readFile(event) {
    var fileList = event.target.files;

    var reader = new FileReader();

    reader.onload = function(loadedEvent) {
        filetext = loadedEvent.target.result;
        document.getElementById("textstore").innerHTML = filetext;
        splitText();
    }
    reader.readAsText(fileList[0]);
}

function splitText() {
    filetext = document.getElementById("textstore").innerHTML;
    var columns = filetext.split("\n");
    var i;
    for (i = 0; i < columns.length; i++) {
        var row = columns[i].split(",");
        displayNewRow(row, i)
    }
}

function displayNewRow(data, rownumber) {
    var appendsfirst = "";
    var appendslast = "";

    if (rownumber == 0) {
        appendsfirst = "<thead><tr>";
        appendslast = "</tr></thead><tbody>";
    }
    else if (rownumber == data.length+1) {
        appendsfirst = "<tr>";
        appendslast = "</tr></tbody>";
    }
    else {
        appendsfirst = "<tr>";
        appendslast = "</tr>";
    }

    finaltable += appendsfirst;
    var i;
    for (i = 0; i < data.length; i++) {
        finaltable += "<td>" + data[i] + "</td>";
    }
    finaltable += appendslast;

    document.getElementById("table").innerHTML = finaltable;
}
</script>

</body>
</html>

